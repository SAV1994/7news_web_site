{% extends "layout/basic.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}{{ user.first_name }} {{ user.last_name }}{% endblock %}

{% block sctipts %}
  <script src="{% static 'scripts/comments_counter.js' %}"></script>
{% endblock %}

{% block content %}
  <h1>Personal account</h1>
  <div class="user-info">
    <form method="post">
      {% csrf_token %}
      {{ form|crispy }}
      <button type="submit">Save</button>
    </form>
  </div>
  {% if news %}
    <div class="user-news">
      {% for n in news %}
        <img src="{{ n.image.url }}">
        <a href="{% url 'main:detail' pk=n.pk %}">
          {{ n.header }}
          {{ n.sub_header }}
          {{ n.teaser }}
        </a>
        <a href="{% url 'main:detail' pk=n.pk %}#comment-form">Comments<span class="comments-counter" data-news-id="{{ n.pk }}"></span></a>
        <a href="{% url 'main:edit_news' pk=n.pk %}">Edit news</a>
      {% endfor %}
    </div>
  {% endif %}
{% endblock %}
